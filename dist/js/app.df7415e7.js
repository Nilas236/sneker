(function(t){function e(e){for(var c,n,o=e[0],u=e[1],s=e[2],d=0,l=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&l.push(i[n][0]),i[n]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(t[c]=u[c]);p&&p(e);while(l.length)l.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],c=!0,n=1;n<r.length;n++){var o=r[n];0!==i[o]&&(c=!1)}c&&(a.splice(e--,1),t=u(u.s=r[0]))}return t}var c={},n={app:0},i={app:0},a=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-2b405f29":"d0e90647","chunk-2d5363e2":"91aab4a4","chunk-f7a4c428":"a557ac98"}[t]+".js"}function u(e){if(c[e])return c[e].exports;var r=c[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(t){var e=[],r={"chunk-2b405f29":1,"chunk-2d5363e2":1,"chunk-f7a4c428":1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=new Promise((function(e,r){for(var c="css/"+({}[t]||t)+"."+{"chunk-2b405f29":"5f671067","chunk-2d5363e2":"20f9e935","chunk-f7a4c428":"4251d27d"}[t]+".css",i=u.p+c,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=a[o],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===c||d===i))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],d=s.getAttribute("data-href");if(d===c||d===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var c=e&&e.target&&e.target.src||i,a=new Error("Loading CSS chunk "+t+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=c,delete n[t],p.parentNode.removeChild(p),r(a)},p.href=i;var b=document.getElementsByTagName("head")[0];b.appendChild(p)})).then((function(){n[t]=0})));var c=i[t];if(0!==c)if(c)e.push(c[2]);else{var a=new Promise((function(e,r){c=i[t]=[e,r]}));e.push(c[2]=a);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=o(t);var l=new Error;s=function(e){d.onerror=d.onload=null,clearTimeout(p);var r=i[t];if(0!==r){if(r){var c=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+c+": "+n+")",l.name="ChunkLoadError",l.type=c,l.request=n,r[1](l)}i[t]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(e)},u.m=t,u.c=c,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)u.d(r,c,function(e){return t[e]}.bind(null,c));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/sneker/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=d;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"19ff":function(t,e,r){t.exports=r.p+"img/trash-icon.b4f77d3a.svg"},"27d2":function(t,e,r){},3533:function(t,e,r){"use strict";r("ae80")},"3e44":function(t,e,r){},4164:function(t,e,r){},"45e2":function(t,e,r){},"4cf9":function(t,e,r){},"4d4b":function(t,e,r){"use strict";r("27d2")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var c=r("7a23");function n(t,e,r,n,i,a){var o=Object(c["D"])("the-nav"),u=Object(c["D"])("cart-preview"),s=Object(c["D"])("router-view");return Object(c["v"])(),Object(c["h"])(c["a"],null,[Object(c["l"])(o,{onTogglePreview:a.togglePreview},null,8,["onTogglePreview"]),Object(c["l"])(c["b"],{name:"preview"},{default:Object(c["I"])((function(){return[i.previewVisible?(Object(c["v"])(),Object(c["f"])(u,{key:0,onTogglePreview:a.togglePreview},null,8,["onTogglePreview"])):Object(c["g"])("",!0)]})),_:1}),Object(c["l"])(s)],64)}var i=r("c4b8"),a=r.n(i),o=function(t){return Object(c["y"])("data-v-52a64eac"),t=t(),Object(c["w"])(),t},u={class:"nav"},s={class:"nav__logo"},d=o((function(){return Object(c["i"])("p",{class:"nav__text"},"Zon",-1)})),l={class:"nav__icon"},p=o((function(){return Object(c["i"])("img",{class:"nav__image",src:a.a,alt:"cart"},null,-1)})),b=[p],f={key:0,class:"nav__qty"};function m(t,e,r,n,i,a){var o=Object(c["D"])("router-link");return Object(c["v"])(),Object(c["h"])("nav",u,[Object(c["i"])("div",s,[Object(c["l"])(o,{to:"/products",onClick:e[0]||(e[0]=function(e){return t.$emit("toggle-preview",!1)})},{default:Object(c["I"])((function(){return[d]})),_:1})]),Object(c["i"])("div",l,[Object(c["i"])("button",{class:"nav__btn",onClick:e[1]||(e[1]=function(e){return t.$emit("toggle-preview",!0)})},b),a.quantity?(Object(c["v"])(),Object(c["h"])("p",f,Object(c["F"])(a.quantity),1)):Object(c["g"])("",!0)])])}var v={emits:["toggle-preview"],data:function(){return{isCartPreviewVisible:!1}},computed:{quantity:function(){return this.$store.getters.getQuantity},currentRoute:function(){return"checkout"!=this.$route.params}}},O=(r("6bda"),r("6b0d")),j=r.n(O);const g=j()(v,[["render",m],["__scopeId","data-v-52a64eac"]]);var _=g,h=r("89fe"),y=r.n(h),w=function(t){return Object(c["y"])("data-v-1487932e"),t=t(),Object(c["w"])(),t},k={key:0,class:"cart-preview__empty"},C={class:"cart-preview"},P={class:"cart-preview__content"},S={class:"cart-preview__close"},I=w((function(){return Object(c["i"])("img",{class:"cart-preview__close-img",src:y.a,alt:"close"},null,-1)})),F=[I],Q={class:"cart-preview__products"},x={class:"cart-preview-checkout"},N={class:"cart-preview__total-price"},q=w((function(){return Object(c["i"])("div",{class:"cart-preview__total-text"},"Сумма:",-1)})),T={class:"cart-preview__price"},$={key:0,class:"cart-preview__checkout-btn"},E=Object(c["k"])("Подтвердить");function A(t,e,r,n,i,a){var o=Object(c["D"])("preview-list"),u=Object(c["D"])("base-button"),s=Object(c["D"])("router-link"),d=Object(c["D"])("base-card");return Object(c["v"])(),Object(c["f"])(d,{class:"cart-preview-card"},{default:Object(c["I"])((function(){return[a.isCartEmpty?(Object(c["v"])(),Object(c["h"])("p",k,"Пусто")):Object(c["g"])("",!0),Object(c["i"])("div",C,[Object(c["i"])("div",P,[Object(c["i"])("div",S,[Object(c["i"])("button",{class:"cart-preview__close-btn",onClick:e[0]||(e[0]=function(){return a.closeCartPreview&&a.closeCartPreview.apply(a,arguments)})},F)]),Object(c["i"])("div",Q,[Object(c["l"])(o,{transits:"preview"})])]),Object(c["i"])("div",x,[Object(c["i"])("div",N,[q,Object(c["i"])("div",T,Object(c["F"])(a.amount)+"₽",1)]),a.isCartEmpty?Object(c["g"])("",!0):(Object(c["v"])(),Object(c["h"])("div",$,[Object(c["l"])(s,{to:"/checkout"},{default:Object(c["I"])((function(){return[Object(c["l"])(u,{onClick:a.closeCartPreview},{default:Object(c["I"])((function(){return[E]})),_:1},8,["onClick"])]})),_:1})]))])])]})),_:1})}var D=r("d03c"),L={components:{PreviewList:D["a"]},emits:["toggle-preview"],computed:{amount:function(){return this.$store.getters.getAmount},isCartEmpty:function(){return 0===this.$store.getters.getProductsCart.length}},methods:{closeCartPreview:function(){this.$emit("toggle-preview",!1)}}};r("e2fa");const J=j()(L,[["render",A],["__scopeId","data-v-1487932e"]]);var M=J,B={components:{TheNav:_,CartPreview:M},data:function(){return{previewVisible:!1}},methods:{togglePreview:function(t){this.previewVisible=t}},created:function(){this.$store.dispatch("setCartFromLocalStorage")}};r("6c4e");const V=j()(B,[["render",n]]);var R=V,G=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),H=(r("b0c0"),r("25f0"),{class:"products"}),K={class:"products__header header"},U={class:"header__content"},Z={class:"header__text"},z={class:"header__brand-name"},W={class:"products__content"},X={class:"products__list"};function Y(t,e,r,n,i,a){var o=Object(c["D"])("product-item");return Object(c["v"])(),Object(c["h"])("div",H,[Object(c["i"])("header",K,[Object(c["i"])("div",U,[Object(c["i"])("p",Z,Object(c["F"])(r.name),1),Object(c["i"])("p",z,Object(c["F"])(r.desc),1)])]),Object(c["i"])("section",W,[Object(c["i"])("ul",X,[(Object(c["v"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(a.products,(function(t){return Object(c["v"])(),Object(c["f"])(o,{key:t.id.toString(),id:t.id,name:t.name,color_way:t.color_way,desc:t.descriprion,price:t.price,image:t.image},null,8,["id","name","color_way","desc","price","image"])})),128))])])])}r("a9e3");var tt=function(t){return Object(c["y"])("data-v-4e966477"),t=t(),Object(c["w"])(),t},et={class:"product-item"},rt={class:"product-item__content"},ct=["src","alt"],nt={class:"product-item__name"},it={class:"product-item__cw"},at={class:"product-item__bottom-wrapper"},ot={class:"product-item__bag"},ut=tt((function(){return Object(c["i"])("img",{class:"product-item__icon",src:a.a,alt:"cart"},null,-1)})),st=[ut],dt={class:"product-item__price"};function lt(t,e,r,n,i,a){var o=Object(c["D"])("router-link");return Object(c["v"])(),Object(c["h"])("li",et,[Object(c["i"])("div",rt,[Object(c["l"])(o,{to:"/products/"+r.id},{default:Object(c["I"])((function(){return[Object(c["i"])("div",{class:Object(c["r"])(["product-item__image",{"product-item__image--visible":i.isCreated}])},[Object(c["i"])("img",{class:"product-item__photo",src:r.image,alt:r.name},null,8,ct)],2)]})),_:1},8,["to"]),Object(c["i"])("div",nt,Object(c["F"])(r.name),1),Object(c["i"])("div",it,Object(c["F"])(r.color_way),1),Object(c["i"])("div",at,[Object(c["i"])("div",ot,[Object(c["i"])("button",{class:"product-item__btn",onClick:e[0]||(e[0]=function(t){return a.addToCart()})},st)]),Object(c["i"])("div",dt,Object(c["F"])(r.price)+"₽",1)])])])}var pt={props:{id:Number,name:String,color_way:String,desc:String,price:Number,image:String},data:function(){return{isCreated:!1}},methods:{addToCart:function(){this.$store.dispatch("addToCart",{id:this.id})}},mounted:function(){var t=this;setTimeout((function(){t.isCreated=!0}))}};r("4d4b");const bt=j()(pt,[["render",lt],["__scopeId","data-v-4e966477"]]);var ft=bt,mt={props:{id:Number,name:String,desc:String,price:Number,image:String},components:{ProductItem:ft},data:function(){return{error:null}},computed:{products:function(){return this.$store.getters.getProducts}},created:function(){try{this.$store.dispatch("loadProducts")}catch(t){this.error=t.message||"Что-то пошло не так"}}};r("6ac2");const vt=j()(mt,[["render",Y],["__scopeId","data-v-2fc86a52"]]);var Ot=vt,jt=[{path:"/",redirect:"/products"},{path:"/products",name:"Products",component:Ot},{path:"/products/:prodId",name:"Detail",props:!0,component:function(){return r.e("chunk-2d5363e2").then(r.bind(null,"5f47"))}},{path:"/checkout",name:"Checkout",component:function(){return r.e("chunk-f7a4c428").then(r.bind(null,"2f1c"))}},{path:"/:notFound(.*)",name:"Not Found",component:function(){return r.e("chunk-2b405f29").then(r.bind(null,"9703"))}}],gt=Object(G["a"])({history:Object(G["b"])("/sneker/"),routes:jt}),_t=gt,ht=r("5502"),yt=r("1da1"),wt=(r("96cf"),r("d9e2"),r("a4d3"),r("e01a"),{state:function(){return{products:[]}},mutations:{setProducts:function(t,e){t.products=e}},actions:{loadProducts:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function e(){var r,c,n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://snkrs-shop-default-rtdb.firebaseio.com/products.json");case 2:return r=e.sent,e.next=5,r.json();case 5:if(c=e.sent,n=[],r.ok){e.next=10;break}throw i=new Error(c.message||"Error"),i;case 10:for(a in c)n.push({id:1*a,name:c[a].name,color_way:c[a].color_way,description:c[a].description,price:60*Math.floor(c[a].price),image:c[a].image});t.commit("setProducts",n);case 12:case"end":return e.stop()}}),e)})))()}},getters:{getProducts:function(t){return t.products}}}),kt=(r("159b"),r("e9c4"),r("c740"),r("a434"),r("7db0"),r("b680"),{state:function(){return{cart:{products:[],totalAmount:0,totalQuantity:0}}},mutations:{addProductToCart:function(t,e){var r=!1;t.cart.products.forEach((function(c,n){c.id===e.id&&(t.cart.products[n].qty++,r=!0)})),r||(e.qty=1,t.cart.products.push(e)),t.cart.totalAmount+=e.price,t.cart.totalQuantity++,localStorage.setItem("cart",JSON.stringify(t.cart))},deleteProductFromCart:function(t,e){var r=t.cart.products.findIndex((function(t){return t.id===e.id}));t.cart.products.splice(r,1),t.cart.totalAmount-=e.price*e.qty,t.cart.totalQuantity-=e.qty,localStorage.setItem("cart",JSON.stringify(t.cart))},addQty:function(t,e){var r=t.cart.products.find((function(t){return t.id===e.id}));r.qty++,t.cart.totalAmount+=r.price,t.cart.totalQuantity++,localStorage.setItem("cart",JSON.stringify(t.cart))},reduceQty:function(t,e){var r=t.cart.products.find((function(t){return t.id===e.id}));if(r.qty--,0===r.qty){var c=t.cart.products.findIndex((function(t){return t.id===e.id}));t.cart.products.splice(c,1)}t.cart.totalAmount-=r.price,t.cart.totalQuantity--,localStorage.setItem("cart",JSON.stringify(t.cart))},cartFromLocalStorage:function(t,e){t.cart=e}},actions:{addToCart:function(t,e){var r=t.rootGetters.getProducts,c=r.find((function(t){return t.id===e.id}));t.commit("addProductToCart",c)},deleteFromCart:function(t,e){var r=t.getters.getProductsCart,c=r.find((function(t){return t.id===e.id}));t.commit("deleteProductFromCart",c)},addQuantity:function(t,e){t.commit("addQty",e)},reduceQuantity:function(t,e){t.commit("reduceQty",e)},setCartFromLocalStorage:function(t){JSON.parse(localStorage.getItem("cart"))&&t.commit("cartFromLocalStorage",JSON.parse(localStorage.getItem("cart")))}},getters:{getQuantity:function(t){return t.cart.totalQuantity},getAmount:function(t){return 1*t.cart.totalAmount.toFixed(2)},getProductsCart:function(t){return t.cart.products}}}),Ct=Object(ht["a"])({modules:{productsModule:wt,cartModule:kt},state:{},mutations:{},actions:{}}),Pt=r("a64c"),St={class:"base-card"};function It(t,e,r,n,i,a){return Object(c["v"])(),Object(c["h"])("div",St,[Object(c["C"])(t.$slots,"default",{},void 0,!0)])}var Ft={};r("e5e3");const Qt=j()(Ft,[["render",It],["__scopeId","data-v-79debbbe"]]);var xt=Qt;Object(c["e"])(R).use(Ct).use(_t).component("base-button",Pt["a"]).component("base-card",xt).mount("#app")},"65be":function(t,e,r){},"6ac2":function(t,e,r){"use strict";r("45e2")},"6bda":function(t,e,r){"use strict";r("65be")},"6c4e":function(t,e,r){"use strict";r("4cf9")},"82c0":function(t,e,r){"use strict";r("4164")},"85a0":function(t,e,r){},"89fe":function(t,e,r){t.exports=r.p+"img/cross.d3ed8664.svg"},9676:function(t,e,r){"use strict";r("c560")},a64c:function(t,e,r){"use strict";var c=r("7a23"),n={class:"base-btn"};function i(t,e){return Object(c["v"])(),Object(c["h"])("button",n,[Object(c["C"])(t.$slots,"default",{},void 0,!0)])}r("82c0");var a=r("6b0d"),o=r.n(a);const u={},s=o()(u,[["render",i],["__scopeId","data-v-84ad4240"]]);e["a"]=s},ae80:function(t,e,r){},c4b8:function(t,e,r){t.exports=r.p+"img/shopping-bag.2f33b291.svg"},c560:function(t,e,r){},d03c:function(t,e,r){"use strict";r("b0c0");var c=r("7a23"),n={class:"cart-preview__list"};function i(t,e,r,i,a,o){var u=Object(c["D"])("preview-item");return Object(c["v"])(),Object(c["h"])("ul",n,[Object(c["l"])(c["c"],{name:"cart-element"},{default:Object(c["I"])((function(){return[(Object(c["v"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(o.cardProducts,(function(t){return Object(c["v"])(),Object(c["f"])(u,{key:t.name,id:t.id,name:t.name,cw:t.color_way,price:t.price,image:t.image,qty:t.qty},null,8,["id","name","cw","price","image","qty"])})),128))]})),_:1})])}var a=r("19ff"),o=r.n(a),u=function(t){return Object(c["y"])("data-v-2cdc44f6"),t=t(),Object(c["w"])(),t},s={class:"preview-item-li"},d={class:"preview-item"},l={class:"preview-item__shoe-photo"},p=["src","alt"],b={class:"preview-item__info"},f={class:"preview-item__name"},m={class:"preview-item__brand"},v={class:"preview-item__cw"},O={class:"preview-item__quantity"},j=Object(c["k"])(" Кол-во: "),g={class:"preview-item__aside"},_={class:"preview-item__delete"},h=u((function(){return Object(c["i"])("img",{class:"preview-item__delete-img",src:o.a,alt:"delete"},null,-1)})),y=[h],w={class:"preview-item__price"};function k(t,e,r,n,i,a){return Object(c["v"])(),Object(c["h"])("li",s,[Object(c["i"])("div",d,[Object(c["i"])("div",l,[Object(c["i"])("img",{class:"preview-item__img",src:r.image,alt:r.name},null,8,p)]),Object(c["i"])("div",b,[Object(c["i"])("div",f,[Object(c["i"])("div",m,Object(c["F"])(r.name),1),Object(c["i"])("div",v,Object(c["F"])(r.cw),1),Object(c["i"])("div",O,[j,Object(c["i"])("button",{class:"preview-item__btn",onClick:e[0]||(e[0]=function(){return a.addQty&&a.addQty.apply(a,arguments)})},"+"),Object(c["k"])(" "+Object(c["F"])(r.qty)+" ",1),Object(c["i"])("button",{class:"preview-item__btn",onClick:e[1]||(e[1]=function(){return a.reduceQty&&a.reduceQty.apply(a,arguments)})},"-")])]),Object(c["i"])("div",g,[Object(c["i"])("div",_,[Object(c["i"])("button",{class:"preview-item__delete-btn",onClick:e[2]||(e[2]=function(){return a.deleteItem&&a.deleteItem.apply(a,arguments)})},y)]),Object(c["i"])("div",w,Object(c["F"])(r.price)+"₽",1)])])])])}r("a9e3");var C={props:{id:Number,name:String,cw:String,price:Number,image:String,qty:Number},data:function(){return{isCreated:!1}},methods:{deleteItem:function(){this.$store.dispatch("deleteFromCart",{id:this.id})},addQty:function(){this.$store.dispatch("addQuantity",{id:this.id})},reduceQty:function(){this.$store.dispatch("reduceQuantity",{id:this.id})}}},P=(r("9676"),r("6b0d")),S=r.n(P);const I=S()(C,[["render",k],["__scopeId","data-v-2cdc44f6"]]);var F=I,Q={components:{PreviewItem:F},computed:{cardProducts:function(){return this.$store.getters.getProductsCart}}};r("3533");const x=S()(Q,[["render",i],["__scopeId","data-v-affda4d4"]]);e["a"]=x},e2fa:function(t,e,r){"use strict";r("3e44")},e5e3:function(t,e,r){"use strict";r("85a0")}});
//# sourceMappingURL=app.df7415e7.js.map